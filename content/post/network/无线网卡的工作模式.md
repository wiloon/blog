---
title: 无线网卡的工作模式
author: "-"
date: 2011-12-04T10:21:00+00:00
url: /?p=1786
categories:
  - Network
tags:$
  - reprint
---
## 无线网卡的工作模式

       无线网卡可以工作在多种模式之下。常见的有Master，Manged，ad-hoc，monitor等模式。
  
对于Master模式，它主要使用于无线接入点AP提供无线接入服务以及路由功能。可以想象我们使用的无线路由器就是工作在Master模式下了，不过对于普通的pc机来说，如果有合适的硬件它也可以变成一台无线AP。在LINUX下使用软件HOSTAP可以使一台linux pc具有ap功能，但目前HOSTAP的所支持的无线网卡有限，我的INTEL Centrino PRO 4965 wireless card就不被hostap所支持。
  
对于一般的无线网卡来说，它们最常见的模式还是managed，ad-hoc和monitor。Managed模式用于和无线AP进行接入连接，在这个模式下我们才可以进行无线接入internet上网。对于需要两台主机进行直连的情况下可以使用ad-hoc模式，这样主机之间是采用对等网络的方式进行连接。Monitor模式主要用于监控无线网络内部的流量，用于检查网络和排错。
  

 Promiscuous和Monitor(RFMON)的区别
  
在传统的有限网络中，我们知道网卡可以工作在两种模式，即普通和混杂模式。在混杂模式(Promiscuous mode)下面，我们可以直接对以太网内部的流量进行监听。这个时候网卡不会区分流经其的数据包的目标地址是不是本机，一股脑儿的都将其截下供协议栈上层进行调用查看。这也正是传统的sniffer软件得以存在的一个根本基础。
  
无线网络和传统的有线以太网相比，有不同也有相似之处。无线局域网的信号传递完全是以无线电的方式进行广播传输的，这也就意味着每个人可以一定的装置来对无线电讯号进行接收并进行破解。所以无线局域网相对于有线网络来说更加的不安全。按照理论来说，当一个网卡连接到一个已知的无线网络之后，它应该可以和传统的以太网络一样能设置为混杂模式接受到所有的数据包。因为在无线的环境下所有的无线电讯号都可以被网卡接收，无线ap没有办法扮演一个交换机实现点对点的限制转发。但实际情况是，目前的驱动貌似还没进行足够的开发来支持这样的混杂模式，至少对于我的IPW4965是如此。
  
但这并不意味着没有办法对无线流量进行监听。无线网卡有着一个特殊的模式，即监听模式(monitor mode, or RFMON, Radio Frequence monitor mode)。上文已经说了所有的数据包都是以无线电信号来传输的，所以在这个模式下面网卡可以接收到所有它能够接收的无线电信号并试图进行解析，而不仅仅局限于它所连接的无线局域网。这样的模式对于无线局域网的发现机制来说有着根本的作用，也无形的提供了破解无线局域网的工具。一些工具如KISMET，NetStumbler等可以利用monitor模式来进行发现无线局域网的SSID和破解它的密码。
  
这样听起来，貌似monitor模式要远甚于promiscuous模式，但是对于无线局域网的软件开发来说，没有promicuous模式是一个很麻烦的事情。至少我现在还在对这方面进行研究。虽然看到了一点希望，如可以在monitor模式下进行数据包的注入，不过具体的实现还有待发掘。