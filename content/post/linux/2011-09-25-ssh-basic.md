---
title: ssh basic
author: "-"
type: post
date: 2011-09-25T09:54:40+00:00
url: /?p=913
categories:
  - Linux

---
### 测试
    ssh -T git@github.com

### 强制使用密码登录, force ssh client to use only password auth
    ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no 192.168.2.x -l user0
    
```bash
  
#debian
  
sudo apt-get install openssh-server

#archlinux
  
sudo pacman -S openssh

sudo /etc/init.d/ssh start|stop|restart

ssh IP
  
ssh IP -p 1234 -l root
  
```



### 三种shell脚本调用方法(fork, exec, source)
原文: http://mindream.wang.blog.163.com/blog/static/2325122220084624318692/

fork(/path/to/script.sh)
fork是最普通的, 就是直接在脚本里面用/directory/script.sh来调用script.sh这个脚本。

运行的时候开一个sub-shell执行调用的脚本，sub-shell执行的时候, parent-shell还在。

sub-shell执行完毕后返回parent-shell。sub-shell从parent-shell继承环境变量，但是sub-shell中的环境变量不会带回parent-shell。

exec (exec /path/to/script.sh)
exec与fork不同，不需要新开一个sub-shell来执行被调用的脚本。被调用的脚本与父脚本在同一个shell内执行。但是使用exec调用一个新脚本以后, 父脚本中exec行之后的内容就不会再执行了。这是exec和source的区别。

source (source /directory/script.sh)
与fork的区别是不新开一个sub-shell来执行被调用的脚本，而是在同一个shell中执行。所以被调用的脚本中声明的变量和环境变量。都可以在主脚本中得到和使用。

可以通过下面这两个脚本来体会三种调用方式的不同:

#!/bin/bash
A=B
echo "PID for 1.sh before exec/source/fork:$$"
export A
echo "1.sh: $A is $A"
case in
    exec)
        echo "using exec…"
        exec ./2.sh ;;
    source)
        echo "using source…"
        . ./2.sh ;;
    *)
        echo "using fork by default…"
        ./2.sh ;;
esac
echo "PID for 1.sh after exec/source/fork:$$"
echo "1.sh: $A is $A"

#!/bin/bash
echo "PID for 2.sh: $$"
echo "2.sh get $A=$A from 1.sh"
A=C
export A
echo "2.sh: $A is $A"


---




### -A option enables forwarding of the authentication agent connection.
There is a shortcut to archive this, if we don't want to create a config file, we have another option, using -A flag with the ssh command.

    ssh -A user@myhost.com 
