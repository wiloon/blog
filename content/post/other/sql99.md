---
title: SQL99
author: "-"
date: 2012-07-01T08:41:57+00:00
url: sql99
categories:
  - DataBase
tags:
  - reprint
---
## SQL99

来自ITwiki，开放的信息技术大百科  [http://wiki.ccw.com.cn/SQL99](http://wiki.ccw.com.cn/SQL99)

SQL99是数据库的一个ANSI/ISO标准。这个标准的前身是SQL92 ANSI/ISO标准，而SQL92之前还有一个SQL89 ANSI/ISO标准。它定义了一种语言 (SQL) 以及数据库的行为 (事务、隔离级别等) 。你知道许多商业数据库至少在某种程度上是符合SQL99的吗？不过，这对于查询和应用的可移植性没有多大的意义，这一点你也清楚吗？

SQL92标准有4个层次:

      q 入门级 (Entry level) 。这是大多数开发商符合的级别。这一级只是对前一个标准SQL89稍做修改。所有数据库开发商都不会有更高的级别，实际上，美国国家标准和技术协会NIST (National Institute of Standards and Technology，这是一家专门检验SQL合规性的机构) 除了验证入门级外，甚至不做其他的验证。Oracle 7.0于1993年通过了NIST的SQL92入门级合规性验证，那时我也是小组中的一个成员。如果一个数据库符合入门级，它的特性集则是Oracle 7.0的一个功能子集。
    
    
    
      q 过渡级。这一级在特性集方面大致介于入门级和中间级之间。
    
    
    
      q 中间级。这一级增加了许多特性，包括 (以下所列并不完整) : 
    
    
    
      n 动态SQL
    
    
    
      n 级联DELETE以保证引用完整性
    
    
    
      n DATE和TIME数据类型
    
    
    
      n 域
    
    
    
      n 变长字符串
    
    
    
      n CASE表达式
    
    
    
      n 数据类型之间的CAST函数
    
    
    
      q 完备级。增加了以下特性 (同样，这个列表也不完整) : 
    
    
    
      n 连接管理
    
    
    
      n BIT串数据类型
    
    
    
      n 可延迟的完整性约束
    
    
    
      n FROM子句中的导出表
    
    
    
      n CHECK子句中的子查询
    
    
    
      n 临时表
    
    
    
      入门级标准不包括诸如外联结 (outer join) 、新的内联结 (inner join) 语法等特性。过渡级则指定了外联结语法和内联结语法。中间级增加了更多的特性，当然，完备级就是SQL92全部。有关SQL92的大多数书都没有区别这些级别，这就会带来混淆。这些书只是说明了一个完整实现SQL92的理论数据库会是什么样子。所以无论你拿起哪一本书，都无法将书中所学直接应用到任何SQL92数据库上。关键是，SQL92最多只达到入门级，如果你使用了中间级或更高级里的特性，就存在无法"移植"应用的风险。
    
    
    
      SQL99只定义了两级一致性: 核心 (core) 一致性和增强 (enhanced) 一致性。SQL99力图远远超越传统的"SQL"，并引入了一些对象—关系构造 (数组、集合等) 。它包括SQL MM (多媒体，multimedia) 类型、对象—关系类型等。还没有哪个开发商的数据库经认证符合SQL99核心级或增强级，实际上，据我所知，甚至没有哪个开发商声称他们的产品完全达到了某级一致性。
    
    
    
      对于不同的数据库来说，SQL语法可能存在差异，实现有所不同，同一个查询在不同数据库中的性能也不一样，不仅如此，还存在并发控制、隔离级别、查询一致性等问题。我们将在第7章详细讨论这些问题，并介绍不同数据库的差异对你会有什么影响。
    
    
    
      SQL92/SQL99试图对事务应如何工作以及隔离级别如何实现给出一个明确的定义，但最终，不同的数据库还是有不同的结果。这都是具体实现所致。在一个数据库中，某个应用可能会死锁并完全阻塞。但在另一个数据库中，同样是这个应用，这些问题却有可能不会发生，应用能平稳地运行。在一个数据库中，你可能利用了阻塞 (物理串行化) ，但在另一个数据库上部署时，由于这个数据库不会阻塞，你就会得到错误的答案。要将一个应用部署在另一个数据库上，需要花费大量的精力，付出艰辛的劳动，即使你100%地遵循标准也不例外。
    
    
    
      关键是，不要害怕使用开发商特有的特性，毕竟，你为这些特性花了钱。每个数据库都有自己的一套"技巧"，在每个数据库中总能找到一种完成操作的好办法。要使用最适合当前数据库的做法，移植到其他数据库时再重新实现。要使用合适的编程技术，从而与这些修改隔离，我把这称为防御式编程 (defensive programming) 。
    
    
    
      取自"http://wiki.ccw.com.cn/SQL99"
  