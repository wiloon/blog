---
title: windows route, 路由表
author: "-"
date: 2014-12-25T10:55:44+00:00
url: /?p=7133
categories:
  - Inbox
tags:
  - Windows

---
## windows route, 路由表

### 打印路由表

```bash
route print
```

#### 显示以10.开始的路由

    route print 10.*

1.具体功能

该命令用于在本地IP路由表中显示和修改条目。使用不带参数的ROUTE可以显示帮助。

2.语法详解

route [-f] [-p] [command [destination] [mask netmask] [gateway] [metric

metric] [if interface]

3.参数说明

-f

清除所有不是主路由(子网掩码为255.255.255.255的路由)、环回网络路由(目标为127.0.0.0,子网掩码为 255.255.255.0的路由)或多播路由(目标为224.0.0.0,子网掩码为240.0.0.0的路由)的条目的路由表。如果它与命令之一(例如Add、Change或Delete)结合使用,表会在运行命令之前清除。

-p

与Add命令共同使用时,指定路由被添加到注册表并在启动TCP/IP协议的时候初始化IP路由表。默认情况下,启动TCP/IP协议时不会保存添加的路由,与Print命令一起使用时,则显示永久路由列表。所有其他的命令都忽略此参数。永久路由存储在注册表中的位置是 HKEY_LOCAL_MACHSYSTEMCurrentControlSetServicesTcpipParametersPersistentRoutes。

command 指定要运行的命令。下表列出了有效的命令。

destination

指定路由的网络目标地址。目标地址可以是一个IP网络地址(其中网络地址的主机地址位设置为0),对于主机路由是IP地址,对于默认路由是0.0.0.0。mask

subnetmask

指定与网络目标地址相关联的网掩码(又称子网掩码)。子网掩码对于IP网络地址可以是一适当的子网掩码,对于主机路由是255.255.255.255

,对于默认路由是0.0.0.0。如果忽略,则使用子网掩码255.255.255.255。定义路由时由于目标地址和子网掩码之间的关系,目标地址不能比它对应的子网掩码更为详细。换句话说,如果子网掩码的一位是0,则目标地址中的对应位就不能设置为1。

gateway

指定超过由网络目标和子网掩码定义的可达到的地址集的前一个或下一个跃点IP地址。对于本地连接的子网路由,网关地址是分配给连子网接口的IP地址。对于要经过一个或多个路由器才可用到的远程路由,网关地址是一个分配给相邻路由器的、可直接达到的IP地址。

metric metric

为路由指定所需跃点数的整数值(范围是1～9999),它用来在路由表里的多个路由中选择与转发包中的目标地址最为匹配的路由。所选的路由具有最少的跃点数。跃点数能够反映跃点的数量、路径的速度、路径可靠性、路径吞吐量以及管理属性。

if interface 指定目标可以到达的接口的接口索引。使用Route

print命令可以显示接口及其对应接口索引的列表。对于接口索引可以使用十进制或十六进制的值。对于十六进制值,要在十六进制数的前面加上0x。忽略if参数时,接口由网关地址确定。

注意: 路由表中跃点数一列的值较大是由于允许TCP/IP根据每个LAN接口的IP地址、子网掩码和默认网关的配置自动确定路由表中路由的跃点数造成的。默认启动的自动确定接口跃点数确定了每个接口的速度,调整了每个接口的路由跃点数,因此最快接口所创建的路由具有最低的跃点数。要删除大跃点数,请在每个 LAN连接的TCP/IP协议的高级属性中禁用自动确定接口跃点数。

如果在systemrootSystem32DriversEtc文件夹的本地网络文件中存在适当的条目,名称可以用于Destination。只要名称可以通过"域名系统"(DNS)查询这样的标准主机名解析技术分解为IP地址,就可以将其用于Gateway,DNS查询使用存储在 systemrootSystem32DriversEtc

文件夹下的本地主机文件和NetBIOS 名称解析。

如果是Print或Delete命令,可以忽略Gateway参数,使用通配符来表示目标和网关。Destination的值可以是由星号(_)指定的通配符。如果指定目标含有一个星号(_)或问号(?),它被看作是通配符,只打印或删除匹配的目标路由。星号代表任意一字符序列,问号代表任一字符。例如, 10._.1、192.168._、127._和_224_都是星号通配符的有效使用。

使用了无效的目标和子网掩码(网掩码)值的组合,会显示"Route bad gateway address

netmask"错误消息。目标中有一位或多位设置为1,而其在子网掩码中的对应位设置为0时会发生这个错误。可以通过二进制表示法表示目标和子网掩码来检查这种情况。以二进制表示的子网掩码包括表示目标网络地址部分的一连串的1和表示目标主机地址部分的一连串的0两个部分。查看目标以确定目标的主机地址部分(由子网掩码所定义)

是否有些位设置成了1。

Windows 98 的Route命令不支持-p参数。

只有当TCP/IP协议在网络连接中安装为网络适配器属性的组件时,该命令才可用。

例子3: 要添加默认网关地址为192.168.12.1的默认路由,执行以下命令:

route add 0.0.0.0 mask 0.0.0.0 192.168.12.1

例子4: 要添加目标为10.41.0.0,子网掩码为255.255.0.0,下一个跃点地址为10.27.0.1的路由,执行以下命令:

route add 10.41.0.0 mask 255.255.0.0 10.27.0.1

例子5: 要添加目标为10.41.0.0,子网掩码为255.255.0.0,下一个跃点地址为10.27.0.1的永久路由,执行以下命令:

route -p add 10.41.0.0 mask 255.255.0.0 10.27.0.1

例子6: 要添加目标为10.41.0.0,子网掩码为255.255.0.0,下一个跃点地址为10.27.0.1,跃点数为7的路由,执行以下命令:

route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7

例子7: 要添加目标为10.41.0.0,子网掩码为255.255.0.0,下一个跃点地址为10.27.0.1,接口索引为0x3的路由,执行以下命令:

route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3

例子8: 要删除目标为10.41.0.0,子网掩码为255.255.0.0的路由,执行以下命令:

route delete 10.41.0.0 mask 255.255.0.0

例子9: 要删除IP路由表中以10.开始的所有路由,执行以下命令:

route delete 10.*

例子10: 要将目标为10.41.0.0,子网掩码为255.255.0.0的路由的下一个跃点地址由10.27.0.1更改为10.27.0.25,执行以下命令:

route change 10.41.0.0 mask 255.255.0.0 10.27.0.25
  
Route

大多数主机一般都是驻留在只连接一台路由器的网段上。由于只有一台路由器,因此不存在使用哪一台路由器将数据包发表到远程计算机上去的问题,该路由器的IP地址可作为该网段上所有计算机的缺省网关来输入。
  
但是,当网络上拥有两个或多个路由器时,你就不一定想只依赖缺省网关了。实际上你可能想让你的某些远程IP地址通过某个特定的路由器来传递,而其他的远程IP则通过另一个路由器来传递。
  
在这种情况下,你需要相应的路由信息,这些信息储存在路由表中,每个主机和每个路由器都配有自己独一无二的路由表。大多数路由器使用专门的路由协议来交换和动态更新路由器之间的路由表。但在有些情况下,必须人工将项目添加到路由器和主机上的路由表中。Route就是用来显示、人工添加和修改路由表项目的。

route add–使用本命令,可以将信路由项目添加给路由表。例如,如果要设定一个到目的网络209.98.32.33的路由,其间要经过5个路由器网段,首先要经过本地网络上的一个路由器,器IP为202.96.123.5,子网掩码为255.255.255.224,那么你应该输入以下命令:
  
route add 209.98.32.33 mask 255.255.255.224 202.96.123.5 metric 5
  
route change–你可以使用本命令来修改数据的传输路由,不过,你不能使用本命令来改变数据的目的地。下面这个例子可以将数据的路由改到另一个路由器,它采用一条包含3个网段的更直的路径:
  
route add 209.98.32.33 mask 255.255.255.224 202.96.123.250 metric 3
  
route delete–使用本命令可以从路由表中删除路由。例如: route delete 209.98.32.33
  
——————————————————————————
  
使用 Route 命令行实用工具
  
可以使用 Route 命令行工具查看并编辑计算机的 IP 路由表。Route 命令和语法如下所示:
  
route [-f] [-p] [Command [Destination] [mask Netmask] [Gateway] [metric Metric]] [if Interface]]
  
-f
  
清除所有网关入口的路由表。
  
-p
  
与 add 命令一起使用时使路由具有永久性。
  
Command
  
指定您想运行的命令 (Add/Change/Delete/Print)。
  
Destination
  
指定该路由的网络目标。
  
mask Netmask
  
指定与网络目标相关的网络掩码 (也被称作子网掩码) 。
  
Gateway
  
指定网络目标定义的地址集和子网掩码可以到达的前进或下一跃点 IP 地址。
  
metric Metric
  
为路由指定一个整数成本值标 (从 1 至 9999) ,当在路由表(与转发的数据包目标地址最匹配)的多个路由中进行选择时可以使用。
  
在命令提示符处显示帮助。
  
示例

若要添加带有 192.168.12.1 默认网关地址的默认路由,请键入:
  
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1
  
若要向带有 255.255.0.0 子网掩码和 10.27.0.1 下一跃点地址的 10.41.0.0 目标中添加一个路由,请键入:
  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1
  
若要向带有 255.255.0.0 子网掩码和 10.27.0.1 下一跃点地址的 10.41.0.0 目标中添加一个永久路由,请键入:
  
route -p add 10.41.0.0 mask 255.255.0.0 10.27.0.1
  
若要向带有 255.255.0.0 子网掩码、10.27.0.1 下一跃点地址且其成本值标为 7 的 10.41.0.0 目标中添加一个路由,请键入:
  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7
  
若要向带有 255.255.0.0 子网掩码、10.27.0.1 下一跃点地址且使用 0x3 接口索引的 10.41.0.0 目标中添加一个路由,请键入:
  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3
  
若要删除到带有 255.255.0.0 子网掩码的 10.41.0.0 目标的路由,请键入:
  
route delete 10.41.0.0 mask 255.255.0.0
  
若要删除以 10. 起始的 IP 路由表中的所有路由,请键入:
  
route delete 10.*
  
若要将带有 10.41.0.0 目标和 255.255.0.0 子网掩码的下一跃点地址从 10.27.0.1 修改为 10.27.0.25,请键入:
  
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25
