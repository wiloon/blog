---
title: ruby 语法
author: w1100n
type: post
date: 2012-04-01T08:05:03+00:00
url: /?p=2702
categories:
  - Development

---
**继承符号** —— < (小于号)，可以理解为：子类 (抽象程度更窄化) 小于父类，或者像流操作符一样 把父类的内容都'流'入子类。另外，默认（即未使用继承符号） 时，父类是 Object对象， 和Java一样是单根继承体系；

super关键字是从子类直接调用父类（同名） 方法的 。

`def h` 定义一个函数。它告诉 Ruby 我们的函数名字是 `h`。下一行是函数的内容， 正是我们前面看到过的那行代码：`puts "Hello World!"`。最后的一行 `end` 告诉 Ruby 函数的定义完成了。


  1.1      变量、常量和类型


  1)      定义变量


  <table width="520" border="1" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top" width="161">
        <p align="center">
          变量类型
        
      </td>
      
      <td valign="top" width="227">
        <p align="center">
          描述
        
      </td>
      
      <td valign="top" width="132">
        <p align="center">
          示例
        
      </td>
    </tr>
    
    <tr>
      <td width="161">
        局部变量（或伪变量）
      </td>
      
      <td width="227">
        以小写字母或下划线卡头
      </td>
      
      <td width="132">
        var    _var
      </td>
    </tr>
    
    <tr>
      <td width="161">
        全局变量
      </td>
      
      <td width="227">
        以$开头
      </td>
      
      <td width="132">
        $var
      </td>
    </tr>
    
    <tr>
      <td width="161">
        类变量
      </td>
      
      <td width="227">
        类中定义，以@@开头
      </td>
      
      <td width="132">
        @@var
      </td>
    </tr>
    
    <tr>
      <td width="161">
        实例变量
      </td>
      
      <td width="227">
        对象中定义，以@开头
      </td>
      
      <td width="132">
        @var
      </td>
    </tr>
    
    <tr>
      <td width="161">
        常量
      </td>
      
      <td width="227">
        以大写字母开头
      </td>
      
      <td width="132">
        Var 
        
        
        
      </td>
    </tr>
  </table>

  2) 变量内插


    在双引号内使用"#{变量名}"内插变量

<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="568">
      <p align="left">
        a = 2
      
      
      <p align="left">
        b = 3
      
      
      <p align="left">
        puts "#{a} + #{b} = #{a+b}"  #输入结果为：2 + 3 = 5
      
      
      
      
    </td>
  </tr>
</table>

  1.2 注释


  1）单行注释：以#开头，如： #注释内容


  2）多行注释：在=begin 和 =end 之间定义，如：


  =begin


  注释内容


  =end

  1.3    循环和分支


  1.3.1  条件语句


  <table border="1" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top" width="284">
        <p align="center">
          If 形式
        
      </td>
      
      <td valign="top" width="284">
        <p align="center">
          unless 形式
        
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
        a =1 if y==3
      </td>
      
      <td valign="top" width="284">
        a=1 unless y!=3
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
        x= if a > 0 then b else c end
      </td>
      
      <td valign="top" width="284">
        x= unless a<=0 then a else b end
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
         if x<5 then 
        
        
          a =1
        
        
        
          else
        
        
        
          a =2
        
        
        
          end</td> 
          
          <td valign="top" width="284">
            unless x<5 then 
            
            
              a =2
            
            
            
              else
            
            
            
              a =1
            
            
            
              end</td> </tr> </tbody> </table>  
              
              
                <span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: medium;">
 
              
              
              
                1.3.2  循环结构
              
              
              
                <table border="1" cellspacing="0" cellpadding="0">
                  <tr>
                    <td valign="top" width="284">
                      #while循环 
                      
                      
                        i= 0
                      
                      
                      
                        while i< list.size do
                      
                      
                      
                        print "#list[i] "
                      
                      
                      
                        I += 1
                      
                      
                      
                        end</td> 
                        
                        <td valign="top" width="284">
                          #until循环 
                          
                          
                            i= 0
                          
                          
                          
                            until i == list.size do
                          
                          
                          
                            print "#list[i]"
                          
                          
                          
                            i += 1
                          
                          
                          
                            end</td> </tr> 
                            
                            <tr>
                              <td valign="top" width="284">
                                #for循环 
                                
                                
                                  for x in lisy do
                                
                                
                                
                                  print "#{x}"
                                
                                
                                
                                  end</td> 
                                  
                                  <td valign="top" width="284">
                                    #each循环 
                                    
                                    
                                      list.each do |x|
                                    
                                    
                                    
                                      print "#{x}"
                                    
                                    
                                    
                                      end</td> </tr> 
                                      
                                      <tr>
                                        <td valign="top" width="284">
                                          #loop循环 
                                          
                                          
                                            i = 0
                                          
                                          
                                          
                                            n = list.size-1
                                          
                                          
                                          
                                            loop do
                                          
                                          
                                          
                                            print "#{list[i]}"
                                          
                                          
                                          
                                            i += 1
                                          
                                          
                                          
                                            break if i > n
                                          
                                          
                                          
                                            end</td> 
                                            
                                            <td valign="top" width="284">
                                              #times循环 
                                              
                                              
                                                n = list.size
                                              
                                              
                                              
                                                n.times do |i|
                                              
                                              
                                              
                                                print "#{list[i]}"
                                              
                                              
                                              
                                                end</td> </tr> 
                                                
                                                <tr>
                                                  <td valign="top" width="284">
                                                    #upto循环 
                                                    
                                                    
                                                      n =list.size–1
                                                    
                                                    
                                                    
                                                      0.upto(n) do |i|
                                                    
                                                    
                                                    
                                                      print "#{list[i]}"
                                                    
                                                    
                                                    
                                                      end</td> 
                                                      
                                                      <td valign="top" width="284">
                                                        #each_index循环 
                                                        
                                                        
                                                          list.each_index do |x|
                                                        
                                                        
                                                        
                                                          print "#{list[x]}"
                                                        
                                                        
                                                        
                                                          end
                                                        
                                                        
                                                        
                                                        
                                                      </td></tr> </tbody> </table>  
                                                      
                                                      
                                                      
                                                      
                                                      
                                                        1.3.3  异常
                                                      
                                                      
                                                      
                                                        <table border="1" cellspacing="0" cellpadding="0">
                                                          <tr>
                                                            <td valign="top" width="568">
                                                              <p align="left">
                                                                begin
                                                              
                                                              
                                                              <p align="left">
                                                                    x = Math.sqrt(y/z)
                                                              
                                                              
                                                              <p align="left">
                                                                rescue ArgumentError       #匹配错误类型
                                                              
                                                              
                                                              <p align="left">
                                                                    puts "Error taking square root"
                                                              
                                                              
                                                              <p align="left">
                                                                rescue ZeroDivisionError     #匹配错误类型
                                                              
                                                              
                                                              <p align="left">
                                                                    puts "Attempted division by zero"
                                                              
                                                              
                                                              <p align="left">
                                                                else
                                                              
                                                              
                                                              <p align="left">
                                                                    puts "Other Error"
                                                              
                                                              
                                                              <p align="left">
                                                                ensure
                                                              
                                                              
                                                              <p align="left">
                                                                    #这部分代码在最后一定会执行
                                                              
                                                              
                                                              <p align="left">
                                                                end
                                                              
                                                              
                                                              
                                                                
 
                                                              
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      
                                                      
                                                      
                                                      
                                                      
                                                      
                                                        1.3.4  类
                                                      
                                                      
                                                      
                                                        <table border="1" cellspacing="0" cellpadding="0">
                                                          <tr>
                                                            <td valign="top" width="568">
                                                              <p align="left">
                                                                class Hello #类名必须以大写字母开头
                                                              
                                                              
                                                              <p align="left">
                                                                 @@myname = "John"   #类变量
                                                              
                                                              
                                                              <p align="left">
                                                                <p align="left">
                                                                   def initialize(name,phone)
                                                                
                                                                
                                                                <p align="left">
                                                                        @name,@phone = name,phone #定义实例变量
                                                                
                                                                
                                                                <p align="left">
                                                                   end
                                                                
                                                                
                                                                <p align="left">
                                                                   
                                                                
                                                                
                                                                <p align="left">
                                                                   def hello #定义类方法
                                                                
                                                                
                                                                <p align="left">
                                                                      puts "#{@name}的电话是#{@phone}" 
                                                                
                                                                
                                                                <p align="left">
                                                                   end
                                                                
                                                                
                                                                <p align="left">
                                                                  end
                                                                
                                                                
                                                                <p align="left">
                                                                  <p align="left">
                                                                    f = Hello.new("Tom","13100000000") #创建类对象
                                                                  
                                                                  
                                                                  
                                                                    f.hello #调用类方法，结果为：Tom的电话是13100000000</td> </tr> </tbody> </table>  
                                                                    
                                                                    
                                                                    
                                                                    
                                                                    
                                                                      1.3.5  模块
                                                                    
                                                                    
                                                                    
                                                                      <table border="1" cellspacing="0" cellpadding="0">
                                                                        <tr>
                                                                          <td valign="top" width="149">
                                                                            <p align="center">
                                                                              方法
                                                                            
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            <p align="center">
                                                                              说明
                                                                            
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            include 'watir'
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            将模块的功能添加到当前空间中，不加载已加载的文件
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            extend 'watir'
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            将模块的函数添加到对象中
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            load 'watir'
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            读取文件，并将其插入到源文件的当前位置，以便从这个位置开始就可以使用其定义
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    
                                                                    
                                                                    
                                                                      <span style="font-family: 宋体; font-size: medium;">
 
                                                                    
                                                                    
                                                                    
                                                                      1.3.6  case语句
                                                                    
                                                                    
                                                                    
                                                                      <table border="1" cellspacing="0" cellpadding="0">
                                                                        <tr>
                                                                          <td valign="top" width="568">
                                                                            <p align="left">
                                                                              case x
                                                                            
                                                                            
                                                                            <p align="left">
                                                                               when 1..10              #匹配数字
                                                                            
                                                                            
                                                                            <p align="left">
                                                                                  puts "First branch"
                                                                            
                                                                            
                                                                            <p align="left">
                                                                               when foobar()           #批量方法返回的值
                                                                            
                                                                            
                                                                            <p align="left">
                                                                                  puts "Second branch"
                                                                            
                                                                            
                                                                            <p align="left">
                                                                               when /^hel.*/           #匹配正则表达式
                                                                            
                                                                            
                                                                            <p align="left">
                                                                                  puts "Third branch"
                                                                            
                                                                            
                                                                            <p align="left">
                                                                               else
                                                                            
                                                                            
                                                                            <p align="left">
                                                                                  puts "Last branch"
                                                                            
                                                                            
                                                                            
                                                                              end</td> </tr> </tbody> </table> 