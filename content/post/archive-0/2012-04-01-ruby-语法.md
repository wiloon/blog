---
title: ruby 语法
author: wiloon
type: post
date: 2012-04-01T08:05:03+00:00
url: /?p=2702
categories:
  - Development

---
**继承符号** —— < (小于号)，可以理解为：子类 (抽象程度更窄化) 小于父类，或者像流操作符一样 把父类的内容都‘流’入子类。另外，默认（即未使用继承符号） 时，父类是 Object对象， 和Java一样是单根继承体系；

super关键字是从子类直接调用父类（同名） 方法的 。

`def h` 定义一个函数。它告诉 Ruby 我们的函数名字是 `h`。下一行是函数的内容， 正是我们前面看到过的那行代码：`puts "Hello World!"`。最后的一行 `end` 告诉 Ruby 函数的定义完成了。



<div>
  1.1      变量、常量和类型
</div>

<div>
  1)      定义变量
</div>

<div>
  <table width="520" border="1" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top" width="161">
        <p align="center">
          <strong>变量类型</strong><strong></strong>
        </p>
      </td>
      
      <td valign="top" width="227">
        <p align="center">
          <strong>描述</strong><strong></strong>
        </p>
      </td>
      
      <td valign="top" width="132">
        <p align="center">
          <strong>示例</strong><strong></strong>
        </p>
      </td>
    </tr>
    
    <tr>
      <td width="161">
        局部变量（或伪变量）
      </td>
      
      <td width="227">
        以小写字母或下划线卡头<strong></strong>
      </td>
      
      <td width="132">
        var    _var
      </td>
    </tr>
    
    <tr>
      <td width="161">
        全局变量
      </td>
      
      <td width="227">
        以$开头<strong></strong>
      </td>
      
      <td width="132">
        $var<strong></strong>
      </td>
    </tr>
    
    <tr>
      <td width="161">
        类变量
      </td>
      
      <td width="227">
        类中定义，以@@开头<strong></strong>
      </td>
      
      <td width="132">
        @@var<strong></strong>
      </td>
    </tr>
    
    <tr>
      <td width="161">
        实例变量
      </td>
      
      <td width="227">
        对象中定义，以@开头
      </td>
      
      <td width="132">
        @var<strong></strong>
      </td>
    </tr>
    
    <tr>
      <td width="161">
        常量
      </td>
      
      <td width="227">
        以大写字母开头<strong></strong>
      </td>
      
      <td width="132">
        Var<strong></strong></p> 
        
        <div>
        </div>
      </td>
    </tr>
  </table>
</div>

<div>
</div>

<div>
  2) 变量内插
</div>

<div>
    在双引号内使用“#{变量名}”内插变量
</div>

<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="568">
      <p align="left">
        a =<strong> 2</strong>
      </p>
      
      <p align="left">
        b =<strong> 3</strong>
      </p>
      
      <p align="left">
        puts "#{a} + #{b} = #{a+b}&#8221;  #输入结果为：2 + 3 = 5<strong></strong>
      </p>
      
      <div>
      </div>
    </td>
  </tr>
</table>

<div>
</div>

<div>
  1.2 注释
</div>

<div>
  1）单行注释：以#开头，如： #注释内容
</div>

<div>
  2）多行注释：在=begin 和 =end 之间定义，如：
</div>

<div>
  =begin
</div>

<div>
  注释内容
</div>

<div>
  =end
</div>

<div>
</div>

<div>
  1.3    循环和分支
</div>

<div>
  1.3.1  条件语句
</div>

<div>
  <table border="1" cellspacing="0" cellpadding="0">
    <tr>
      <td valign="top" width="284">
        <p align="center">
          <strong>If </strong><strong>形式</strong><strong></strong>
        </p>
      </td>
      
      <td valign="top" width="284">
        <p align="center">
          <strong>unless </strong><strong>形式</strong><strong></strong>
        </p>
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
        a =1 if y==3
      </td>
      
      <td valign="top" width="284">
        a=1 unless y!=3
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
        x= if a > 0 then b else c end
      </td>
      
      <td valign="top" width="284">
        x= unless a<=0 then a else b end
      </td>
    </tr>
    
    <tr>
      <td valign="top" width="284">
         if x<5 then</p> 
        
        <p>
          a =1
        </p>
        
        <p>
          else
        </p>
        
        <p>
          a =2
        </p>
        
        <p>
          end</td> 
          
          <td valign="top" width="284">
            unless x<5 then</p> 
            
            <p>
              a =2
            </p>
            
            <p>
              else
            </p>
            
            <p>
              a =1
            </p>
            
            <p>
              end</td> </tr> </tbody> </table> </div> 
              
              <div>
                <span style="font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; font-size: medium;">
 </span>
              </div>
              
              <div>
                1.3.2  循环结构
              </div>
              
              <div>
                <table border="1" cellspacing="0" cellpadding="0">
                  <tr>
                    <td valign="top" width="284">
                      <strong>#while</strong><strong>循环</strong><strong></strong></p> 
                      
                      <p>
                        i= 0
                      </p>
                      
                      <p>
                        while i< list.size do
                      </p>
                      
                      <p>
                        print “#list[i] ”
                      </p>
                      
                      <p>
                        I += 1
                      </p>
                      
                      <p>
                        end</td> 
                        
                        <td valign="top" width="284">
                          <strong>#until</strong><strong>循环</strong><strong></strong></p> 
                          
                          <p>
                            i= 0
                          </p>
                          
                          <p>
                            until i == list.size do
                          </p>
                          
                          <p>
                            print “#list[i]”
                          </p>
                          
                          <p>
                            i += 1
                          </p>
                          
                          <p>
                            end</td> </tr> 
                            
                            <tr>
                              <td valign="top" width="284">
                                <strong>#for</strong><strong>循环</strong><strong></strong></p> 
                                
                                <p>
                                  for x in lisy do
                                </p>
                                
                                <p>
                                  print “#{x}”
                                </p>
                                
                                <p>
                                  end</td> 
                                  
                                  <td valign="top" width="284">
                                    <strong>#each</strong><strong>循环</strong><strong></strong></p> 
                                    
                                    <p>
                                      list.each do |x|
                                    </p>
                                    
                                    <p>
                                      print “#{x}”
                                    </p>
                                    
                                    <p>
                                      end</td> </tr> 
                                      
                                      <tr>
                                        <td valign="top" width="284">
                                          <strong>#loop</strong><strong>循环</strong><strong></strong></p> 
                                          
                                          <p>
                                            i = 0
                                          </p>
                                          
                                          <p>
                                            n = list.size-1
                                          </p>
                                          
                                          <p>
                                            loop do
                                          </p>
                                          
                                          <p>
                                            print “#{list[i]}”
                                          </p>
                                          
                                          <p>
                                            i += 1
                                          </p>
                                          
                                          <p>
                                            break if i > n
                                          </p>
                                          
                                          <p>
                                            end</td> 
                                            
                                            <td valign="top" width="284">
                                              <strong>#times</strong><strong>循环</strong><strong></strong></p> 
                                              
                                              <p>
                                                n = list.size
                                              </p>
                                              
                                              <p>
                                                n.times do |i|
                                              </p>
                                              
                                              <p>
                                                print “#{list[i]}”
                                              </p>
                                              
                                              <p>
                                                end</td> </tr> 
                                                
                                                <tr>
                                                  <td valign="top" width="284">
                                                    <strong>#upto</strong><strong>循环</strong><strong></strong></p> 
                                                    
                                                    <p>
                                                      n =list.size–1
                                                    </p>
                                                    
                                                    <p>
                                                      0.upto(n) do |i|
                                                    </p>
                                                    
                                                    <p>
                                                      print “#{list[i]}”
                                                    </p>
                                                    
                                                    <p>
                                                      end</td> 
                                                      
                                                      <td valign="top" width="284">
                                                        <strong>#each_index</strong><strong>循环</strong><strong></strong></p> 
                                                        
                                                        <p>
                                                          list.each_index do |x|
                                                        </p>
                                                        
                                                        <p>
                                                          print “#{list[x]}”
                                                        </p>
                                                        
                                                        <p>
                                                          end
                                                        </p>
                                                        
                                                        <div>
                                                        </div>
                                                      </td></tr> </tbody> </table> </div> 
                                                      
                                                      <div>
                                                      </div>
                                                      
                                                      <div>
                                                        1.3.3  异常
                                                      </div>
                                                      
                                                      <div>
                                                        <table border="1" cellspacing="0" cellpadding="0">
                                                          <tr>
                                                            <td valign="top" width="568">
                                                              <p align="left">
                                                                <strong>begin</strong>
                                                              </p>
                                                              
                                                              <p align="left">
                                                                    x = Math.sqrt(y/z)
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <strong>rescue</strong> ArgumentError       #匹配错误类型
                                                              </p>
                                                              
                                                              <p align="left">
                                                                    puts "Error taking square root&#8221;
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <strong>rescue</strong> ZeroDivisionError     #匹配错误类型
                                                              </p>
                                                              
                                                              <p align="left">
                                                                    puts "Attempted division by zero&#8221;
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <strong>else</strong>
                                                              </p>
                                                              
                                                              <p align="left">
                                                                    puts "Other Error&#8221;
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <strong>ensure</strong>
                                                              </p>
                                                              
                                                              <p align="left">
                                                                    #这部分代码在最后一定会执行
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <strong>end</strong>
                                                              </p>
                                                              
                                                              <div>
                                                                <strong>
 </strong>
                                                              </div>
                                                            </td>
                                                          </tr>
                                                        </table>
                                                      </div>
                                                      
                                                      <div>
                                                      </div>
                                                      
                                                      <div>
                                                        1.3.4  类
                                                      </div>
                                                      
                                                      <div>
                                                        <table border="1" cellspacing="0" cellpadding="0">
                                                          <tr>
                                                            <td valign="top" width="568">
                                                              <p align="left">
                                                                <strong>class</strong> Hello #类名必须以大写字母开头
                                                              </p>
                                                              
                                                              <p align="left">
                                                                 @@myname = "John&#8221;   #类变量
                                                              </p>
                                                              
                                                              <p align="left">
                                                                <p align="left">
                                                                  <strong> def</strong> initialize(name,phone)
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong>      @name</strong>,<strong>@phone</strong> = name,phone #定义实例变量
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong> end</strong>
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong> </strong>
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong> def</strong> hello #定义类方法
                                                                </p>
                                                                
                                                                <p align="left">
                                                                      puts "#{<strong>@name</strong>}的电话是#{<strong>@phone</strong>}&#8221;<strong> </strong>
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong> end</strong>
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <strong>end</strong>
                                                                </p>
                                                                
                                                                <p align="left">
                                                                  <p align="left">
                                                                    f = Hello.new("Tom&#8221;,&#8221;13100000000") #创建类对象
                                                                  </p>
                                                                  
                                                                  <p>
                                                                    f.hello #调用类方法，结果为：Tom的电话是13100000000</td> </tr> </tbody> </table> </div> 
                                                                    
                                                                    <div>
                                                                    </div>
                                                                    
                                                                    <div>
                                                                      1.3.5  模块
                                                                    </div>
                                                                    
                                                                    <div>
                                                                      <table border="1" cellspacing="0" cellpadding="0">
                                                                        <tr>
                                                                          <td valign="top" width="149">
                                                                            <p align="center">
                                                                              方法
                                                                            </p>
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            <p align="center">
                                                                              说明
                                                                            </p>
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            include ‘watir’
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            将模块的功能添加到当前空间中，不加载已加载的文件
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            extend ‘watir’
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            将模块的函数添加到对象中
                                                                          </td>
                                                                        </tr>
                                                                        
                                                                        <tr>
                                                                          <td width="149">
                                                                            load ‘watir’
                                                                          </td>
                                                                          
                                                                          <td valign="top" width="419">
                                                                            读取文件，并将其插入到源文件的当前位置，以便从这个位置开始就可以使用其定义
                                                                          </td>
                                                                        </tr>
                                                                      </table>
                                                                    </div>
                                                                    
                                                                    <div>
                                                                      <span style="font-family: 宋体; font-size: medium;">
 </span>
                                                                    </div>
                                                                    
                                                                    <div>
                                                                      1.3.6  case语句
                                                                    </div>
                                                                    
                                                                    <div>
                                                                      <table border="1" cellspacing="0" cellpadding="0">
                                                                        <tr>
                                                                          <td valign="top" width="568">
                                                                            <p align="left">
                                                                              <strong>case</strong> x
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                              <strong> when</strong><strong> 1</strong>..<strong>10</strong>              #匹配数字
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                                  puts "First branch&#8221;
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                              <strong> when</strong> foobar()           #批量方法返回的值
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                                  puts "Second branch&#8221;
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                              <strong> when</strong> /^hel.*/           #匹配正则表达式
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                                  puts "Third branch&#8221;
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                              <strong> else</strong>
                                                                            </p>
                                                                            
                                                                            <p align="left">
                                                                                  puts "Last branch&#8221;
                                                                            </p>
                                                                            
                                                                            <p>
                                                                              <strong>end</strong></td> </tr> </tbody> </table> </div>