---
title: 'ansible  管理工作站配置, linux初始化'
author: wiloon
type: post
date: 2019-03-16T09:52:21+00:00
url: /?p=13855
categories:
  - Uncategorized

---
### archlinux

<pre><code class="language-bash line-numbers"># archlinux 直接从仓库里安装就是最新版本
sudo pacman -S git ansible
</code></pre>

### ubuntu,debian

ubuntu 默认 apt 安装的ansible版本可能是旧版本， 建议参照ansible官网文档安装新版本的ansible
  
[https://docs.ansible.com/ansible/latest/installation\_guide/intro\_installation.html#latest-releases-via-apt-debian][1]

Add the following line to /etc/apt/sources.list:

<pre><code class="language-bash line-numbers">deb http://ppa.launchpad.net/ansible/ansible/ubuntu trusty main
</code></pre>

Then run these commands:

<pre><code class="language-bash line-numbers">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 93C4A3FD7BB9C367
sudo apt-get update
sudo apt-get install ansible
</code></pre>

### 编写ansible 脚本

<pre><code class="language-bash line-numbers">vim local.yml

- hosts: localhost
  become: true
  tasks:
  - name: Install htop
    apt: name=htop
</code></pre>

### 提交到github

<pre><code class="language-bash line-numbers">git add local.yml
git commit -m "initial commit"
git push origin master
</code></pre>

### 执行脚本 ansible-pull模式

<pre><code class="language-bash line-numbers">sudo ansible-pull -U https://github.com/wiloon/ansible.git
</code></pre>

### 本地执行

<pre><code class="language-bash line-numbers">ansible-playbook  ansible/local.yml --extra-vars "user_name=wiloonwy"
</code></pre>

https://linux.cn/article-10434-1.html

 [1]: https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html#latest-releases-via-apt-debian