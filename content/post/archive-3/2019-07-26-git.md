---
title: git
author: "-"
date: 2019-07-26T08:07:52+00:00
url: git
categories:
  - dev

---
## git
```puml
@startuml

@enduml
```
Git本地库中的索引Index就是一个二进制文件，默认存储在.git/index路径下。
  
1.索引

索引中包含一个列表，列表根据文件名、文件模式和文件元数据进行了排序，以便快速检测文件的变化。

索引中还包含所有Blob类型的SHA-1标识符。
  
2.Git文件状态

对于新创建的一个文件，其状态为untracked。

通过git add ...命令，可以将该新建文件的状态转换为staged，这个过程就是将新建文件加入到Index中。

### 理解 git fetch, git pull 

要讲清楚git fetch，git pull,必须要附加讲清楚git remote，git merge 、远程repo， branch 、 commit-id 以及 FETCH_HEAD。

### git remote
git是一个分布式的结构，这意味着本地和远程是一个相对的名称。

本地的repo仓库要与远程的repo配合完成版本对应必须要有 git remote 子命令，通过 git remote add 来添加当前本地仓库的远程 repo， 有了这个动作本地的repo就知道了当遇到 git push 的时候应该往哪里提交代码。

### git branch
git天生就是为了多版本分支管理而创造的，因此分支一说，不得不提， 分支就相当于是为了单独记录软件的某一个发布版本而存在的，既然git是分布式的，便有了本地分支和远程分支一说，git branch 可以查看本地分支， git branch -r  可以用来查看远程分支。 本地分支和远程分支在git push 的时候可以随意指定，交错对应，只要不出现版本冲突即可。

### git merge
git 的分布式结构也非常适合多人合作开发不同的功能模块，此时如果每个人都在其各自的分支上开发一个相对独立的模块的话，在每次 release 时都需先将各成员的模块做一个合并操作，用于合并各成员的工作成果，完成集成。 此时需要的就是 git merge.

### git push 和 commit-id
在每次本地工作完成后，都会做一个 git commit 操作来保存当前工作到本地的 repo， 此时会产生一个 commit-id，这是一个能唯一标识一个版本的序列号。 在使用 git push 后，这个序列号还会同步到远程repo。

在理解了以上git要素之后，分析git fetch 和 git pull 就不再困难了。 


### git fetch 有四种基本用法

- git fetch 更新 git remote 中所有的远程repo 所包含分支的最新 commit-id, 将其记录到 .git/FETCH_HEAD 文件中
- git fetch remote_repo 这将更新名称为remote_repo 的远程 repo 上的所有branch的最新commit-id，将其记录。 
- git fetch remote_repo remote_branch_name 这将这将更新名称为remote_repo 的远程repo上的分支： remote_branch_name
- git fetch remote_repo remote_branch_name:local_branch_name 这将这将更新名称为remote_repo 的远程repo上的分支： remote_branch_name ，并在本地创建local_branch_name 本地分支保存远端分支的所有数据。

FETCH_HEAD： 是一个版本链接，记录在本地的一个文件中，指向着目前已经从远程仓库取下来的分支的末端版本。

### git pull 的运行过程：

git pull 首先，基于本地的FETCH_HEAD记录，比对本地的FETCH_HEAD记录与远程仓库的版本号，然后git fetch 获得当前指向的远程分支的后续版本的数据，然后再利用git merge将其与本地的当前分支合并。

https://blog.csdn.net/taiyangdao/article/details/52761572

作者： fandyst
出处： http://www.cnblogs.com/todototry/
关注语言： python、javascript(node.js)、objective-C、java、R、C++
兴趣点： 互联网、大数据技术、大数据IO瓶颈、col-oriented DB、Key-Value DB、数据挖掘、模式识别、deep learning、开发与成本管理
产品：
本文版权归作者和博客园共有,欢迎转载,但未经作者同意必须保留此段声明,且在文章页面明显位置给出原文连接。

