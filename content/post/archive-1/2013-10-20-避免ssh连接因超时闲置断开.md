---
title: 避免SSH连接因超时闲置断开
author: wiloon
type: post
date: 2013-10-20T05:48:51+00:00
url: /?p=5861
categories:
  - Uncategorized
tags:
  - linux
  - SSH

---
# 

<div id="credits">
  此页由Linux Wiki用户<a title="User:Chenxing" href="http://linux-wiki.cn/wiki/User:Chenxing">Chenxing</a>于2012年2月5日 (星期日) 03:14的最后更改。
</div>

<div id="bodyContent">
  <div id="contentSub">
  </div>
  
  <p>
    用<a href="http://zh.wikipedia.org/wiki/SSH" target="_blank" rel="nofollow">SSH</a>过程连接电脑时，经常遇到长时间不操作而被服务器踢出的情况，常见的提示如：
  </p>
  
  <pre>Write failed: Broken pipe</pre>
  
  <p>
    这是因为如果有一段时间在SSH连接上无数据传输，连接就会断开。解决此问题有两种方法。<sup id="cite_ref-0"><a href="http://linux-wiki.cn/wiki/zh-hans/%E9%81%BF%E5%85%8DSSH%E8%BF%9E%E6%8E%A5%E5%9B%A0%E8%B6%85%E6%97%B6%E9%97%B2%E7%BD%AE%E6%96%AD%E5%BC%80#cite_note-0">[1]</a></sup>
  </p>
  
  <h2>
    方案一：在客户端设置
  </h2>
  
  <p>
    方法很简单，只需在客户端电脑上编辑（需要root权限）<i>/etc/ssh/ssh_config</i>，并添加如下一行：
  </p>
  
  <pre>ServerAliveInterval 60</pre>
  
  <p>
    此后该系统里的用户连接SSH时，每60秒会发一个KeepAlive请求，避免被踢。
  </p>
  
  <h2>
    方案二：在服务器端设置
  </h2>
  
  <p>
    如果有相应的权限，也可以在服务器端设置，即编辑<i>/etc/ssh/sshd_config</i>，并添加：
  </p>
  
  <pre>ClientAliveInterval 60</pre>
  
  <p>
    重启SSH服务器后该项设置会生效。每一个连接到此服务器上的客户端都会受其影响。应注意启用该功能后，安全性会有一定下降（比如忘记登出时……）
  </p>
</div>