---
title: H2 Database
author: wiloon
type: post
date: 2014-02-21T01:33:11+00:00
url: /?p=6268
categories:
  - Uncategorized
tags:
  - Database
  - H2

---
&nbsp;

**H2的简单使用**

**安装：**

H2不依赖与任何Jar包，使用H2时，只需要将H2的Jar包添加到classpath中即可。

<div id="">
  <div>
    <div>
      Xml代码  <a title="收藏这段代码"><img alt="收藏代码" src="http://puroc.iteye.com/images/icon_star.png" /></a>
    </div>
  </div>
  
  <ol start="1">
    <li>
      <dependency>
    </li>
    <li>
          <groupId>com.h2database</groupId>
    </li>
    <li>
          <artifactId>h2</artifactId>
    </li>
    <li>
          <version>1.3.171</version>
    </li>
    <li>
      </dependency>
    </li>
  </ol>
</div>

**配置数据源：**
  
通过spring jdbc来访问H2，下面是spring的配置，在这里我使用的是H2的in-memery模式。

<div id="">
  <div>
    <div>
      Xml代码  <a title="收藏这段代码"><img alt="收藏代码" src="http://puroc.iteye.com/images/icon_star.png" /></a>
    </div>
  </div>
  
  <ol start="1">
    <li>
      <bean id=&#8221;dataSource4H2&#8243; class=&#8221;org.apache.commons.dbcp.BasicDataSource&#8221;
    </li>
    <li>
              destroy-method=&#8221;close&#8221;>
    </li>
    <li>
              <property name=&#8221;driverClassName&#8221; value=&#8221;org.h2.Driver&#8221; />
    </li>
    <li>
              <property name=&#8221;url&#8221;
    </li>
    <li>
                  value=&#8221;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;IGNORECASE=TRUE;MODE=MySQL&#8221; />
    </li>
    <li>
              <property name=&#8221;username&#8221; value=&#8221;test&#8221; />
    </li>
    <li>
              <property name=&#8221;password&#8221; value=&#8221;test&#8221; />
    </li>
    <li>
      </bean>
    </li>
    <li>
    </li>
    <li>
      <bean id=&#8221;jdbcTemplate4H2&#8243; class=&#8221;org.springframework.jdbc.core.JdbcTemplate&#8221;>
    </li>
    <li>
              <property name=&#8221;dataSource&#8221;>
    </li>
    <li>
                  <ref bean=&#8221;dataSource4H2&#8243; />
    </li>
    <li>
              </property>
    </li>
    <li>
      </bean>
    </li>
  </ol>
</div>

H2的URL可以支持很多参数的设置，具体可以参看H2的官方网站<a href="http://www.h2database.com/html/features.html" target="_blank">http://www.h2database.com/html/features.html</a>

我这里的参数配置说明如下：
  
a) jdbc:h2:mem:test：代表用内存来存储数据。mem:后面的为数据库名称。
  
b) DB\_CLOSE\_DELAY=-1：代表当JVM停止时才关闭H2数据库。
  
c) IGNORECASE=TRUE：不区分大小写。
  
d) MODE=MySQL：H2本身支持的是标准的SQL，但实际上不同的数据库之间存在一些差别，H2为了适配不同的数据库，可以在URL中添加MODE这个参数，我们使用的是MySQL数据库，所以MODE=MySQL

**使用：**
  
通过spring jdbcTemplate来访问H2

**H2 Console**
  
H2还提供了一个控制台，能够查看H2中的数据，添加这个控制台也很简单，只需要在web.xml中增加一个servlet的配置，如下：

<div id="">
  <div>
    <div>
      Xml代码  <a title="收藏这段代码"><img alt="收藏代码" src="http://puroc.iteye.com/images/icon_star.png" /></a>
    </div>
  </div>
  
  <ol start="1">
    <li>
      <servlet>
    </li>
    <li>
              <servlet-name>H2Console</servlet-name>
    </li>
    <li>
              <servlet-class>org.h2.server.web.WebServlet</servlet-class>
    </li>
    <li>
              <load-on-startup>1</load-on-startup>
    </li>
    <li>
      </servlet>
    </li>
    <li>
      <servlet-mapping>
    </li>
    <li>
              <servlet-name>H2Console</servlet-name>
    </li>
    <li>
              <url-pattern>/memerydb/console/*</url-pattern>
    </li>
    <li>
      </servlet-mapping>
    </li>
  </ol>
</div>

然后通过浏览器访问就能够看到H2 Console,在console修改数据，其实就是修改H2内存数据库中的数据。

http://blog.csdn.net/yixiaoping/article/details/9801397

**http://puroc.iteye.com/blog/1851790**