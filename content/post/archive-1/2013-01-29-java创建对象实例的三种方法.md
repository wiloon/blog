---
title: Java创建对象实例的三种方法
author: wiloon
type: post
date: 2013-01-29T09:59:06+00:00
url: /?p=5085
categories:
  - Java
tags:
  - Java

---
<span style="line-height: 1.5em;">Java有三种方法可以创建对象实例。

1.new

通常都是使用java的关键字new来创建对象实例。

若有一个Something类，则可以通过下面的语句创建Something类的对象实例并指定到变量obj。

[java]

Something something New = new Something()；

[/java]

通过new创建对象实例必须把类名写在原代码里面。

2.clone

若程序写成如下，则可以根据当前对象（this）建立一个新实例对象（没有调用构造函数）.

[java]

public class Something implements Cloneable{

private Something obj;

public Something cloneSomething()

{

try {

obj = (Something)this.clone();

// obj = (Something)clone();

} catch (CloneNotSupportedException e) {

e.printStackTrace();

}

return obj;

}

}

[/java]

如果需要复制上面的那个obj指向的对象实例时，调用somethingNew.cloneSomething()方法就ok了。

但是为什么不直接使用somethingNew.clone()呢？

JDK中Object# clone()方法的原型是：

protected native Object clone() throws CloneNotSupportedException;

方法修饰符是protected，而不是public。这种访问的不可见性使得我们对Object#clone()方法不可见。

所以，必需重写Object的clone方法后才能使用。

[java]

public Object clone()throws CloneNotSupportedException

{

Something obj;

obj= (Something)super.clone();

return obj;

}

[/java]

值得注意的是 ：如果需要使用clone方法，必需实现java.lang.Cloneable接口，否则会抛出java.lang.CloneNotSupportedException。

另外clone方法所做的的操作是直接复制字段的内容，换句话说，这个操作并不管该字段对应的对象实例内容。

像这样字段对字段的拷贝（field to field copy）就成为"浅拷贝"，clone方法所做的正是"浅拷贝".

3.newInstance

利用java.lang.Class类的newInstance方法，则可根据Class对象的实例，建立该Class所表示的类的对象实例。

创建Something类的对象实例可以使用下面的语句（这样需要一个已经存在的对象实例）。

[java]

somethingNew.getClass().newInstance().

[/java]

或者使用下面的语句（只需要存在相应的.class文件即可）

[java]

Something instance = (Something) Class.forName("cn.softkid.test.Something").newInstance();

[/java]

如果包下不存在相应.class文件，则会抛出ClassNotFoundException。

注意 ：newInstance创建对象实例的时候会调用无参的构造函数，所以必需确保类中有无参数的构造函数，否则将会

抛出java.lang.InstantiationException异常。无法进行实例化。