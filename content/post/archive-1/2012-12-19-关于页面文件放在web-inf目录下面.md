---
title: 关于页面文件放在/WEB-INF目录下面
author: wiloon
type: post
date: 2012-12-19T04:28:13+00:00
url: /?p=4928
categories:
  - Java
  - Web

---
http://wangke0611.iteye.com/blog/600469

本人在看《J2EE核心模式》（“Core J2ee Patterns”，刘天北、熊节译），里面提到了一种实现资源保护的方法，那就是把那些限制访问的资源（比如说jsp源代码）放到Web应用的WEB-INF目录下，对于/web-INF/及其子目录，不允许直接的公共访问，所以就可以起到保护这些代码未经授权的访问和窥视，更好的保护了源代码（19页）。

这么书只是对这种方法进行了简单的介绍，没有描述详细处理方法，我测试了一下，没有办法对放到/WEB-INF的文件进行访问，所以我就上网搜索了一下，才明白了具体的处理方法，感觉非常适合用在STRUTS结构上的系统。下面请听我详细说明。

通常JSP开发人员会把他们的页面文件存放在Web应用相应的子目录下。一个典型的商店应用程序的目录结构如图2所示。跟catalog （商品目录）相关的JSP被保存在catalog子目录下。跟customer相关的JSP，跟订单相关的JSP等都按照这种方法存放。

图 2.基于不同的功能 JSP 被放置在不同的目录下

这种方法的问题是这些页面文件容易被偷看到源代码，或被直接调用。某些场合下这可能不是个大问题，可是在特定情形中却可能构成安全隐患。用户可以绕过Struts的controller直接调用JSP同样也是个问题。

为了减少风险，可以把这些页面文件移到WEB-INF 目录下。基于Servlet的声明，WEB-INF不作为Web应用的公共文档树的一部分。因此，WEB-INF 目录下的资源不是为客户直接服务的。我们仍然可以使用WEB-INF目录下的JSP页面来提供视图给客户，客户却不能直接请求访问JSP。