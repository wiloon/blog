---
title: ajax 文件下载
author: wiloon
type: post
date: 2014-02-26T06:23:12+00:00
url: /?p=6291
categories:
  - Uncategorized
tags:
  - JavaScript

---
http://blog.csdn.net/androidmylove/article/details/8881573

查了好多资料，发现还是不全，干脆自己整理吧，至少保证在我的做法正确的，以免误导读者，也是给自己做个记录吧！

<div>
  <pre>// Ajax 文件下载
jQuery.download = function(url, data, method){
    // 获得url和data
    if( url && data ){ 
        // data 是 string 或者 array/object
        data = typeof data == 'string' ? data : jQuery.param(data);
        // 把参数组装成 form的  input
        var inputs = '';
        jQuery.each(data.split('&'), function(){ 
            var pair = this.split('=');
            inputs+='&lt;input type="hidden" name="'+ pair[0] +'" value="'+ pair[1] +'" /&gt;'; 
        });
        // request发送请求
        jQuery('&lt;form action="'+ url +'" method="'+ (method||'post') +'"&gt;'+inputs+'&lt;/form&gt;')
        .appendTo('body').submit().remove();
    };
};</pre>
</div>

<div>
      每日一道理<br /> 春蚕死去了，但留下了华贵丝绸；蝴蝶死去了，但留下了漂亮的衣裳；画眉飞去了，但留下了美妙的歌声；花朵凋谢了，但留下了缕缕幽香；蜡烛燃尽了，但留下一片光明；雷雨过去了，但留下了七彩霓虹。
</div>

\*\\*\*也就是动态渲染表单，提交表单后再删除。\*\**

用调例实

<div>
  <pre>$.download('ExcelDownload.do','find=commoncode','post' );</pre>
</div>

文章结束给大家分享下程序员的一些笑话语录： 一个合格的程序员是不会写出 诸如 “摧毁地球” 这样的程序的，他们会写一个函数叫 “摧毁行星”而把地球当一个参数传进去。