---
title: BGP 链路
author: "-"
date: 2016-04-13T00:26:47+00:00
url: /?p=8883
categories:
  - Inbox
tags:
  - reprint
---
## BGP 链路

<http://blog.sina.com.cn/s/blog_5128081e01008kbc.html>

BGP双链路动态接入技术介绍
  
(2008-04-07 15:53:27) 转载▼
  
标签: it
  
分类:  新网资讯
  
BGP双链路动态接入

BGP双链路动态接入可实现对中国电信的用户和中国网通用户对机房服务器的高速访问,解决了中国网通和中国电信互连带宽瓶颈及访问国际网站的限制。

双线|智能双线|BGP双线详解

IDC双线路技术就是在互联网数据中心(IDC)通过特殊的技术手段把不同的网络接入商(ISP)服务接入到一台服务器上或服务器集群,使服务器所提供的网络服务访问用户能尽可能以同一个ISP或互访速度较快的ISP连接来进行访问,从而解决或者减轻跨ISP用户访问网站的缓慢延迟(南北网络瓶颈)问题。IDC双线路是一个技术概念可以多有具体实现方式,目前国内的IDC提供商分别提出了"双IP双线路"、"单IP双线路"、"CDN多线路"和"BGP单IP双线路"等双线路实现方法,下面来对以上提出的双线路实现方式进行具体说明:
  
一、 双IP双线路实现方式
  
双IP双线路实现方式是指在一台服务器上安装两块网卡,分别接入电信网线与网通网线并设置一个网通IP与一个电信IP,这样一台服务器上就有了两个IP地址,需要在服务器上添加网通或电信的路由表来实现网通用户与电信用户分别从不同的线路访问。双IP双线路具有常用的两种使用方式:
  
1． ICP用户在网站设置两个IP地址不同的链接,网通用户点击网通IP访问服务器,电信用户点击电信IP访问。

2.使用BIND9 (DNS服务器软件) 对不同的

IP地址请求返回不同的服务器IP的功能来实现网通用户请求域名时返回网通的IP,电信用户请求域名时返回电信的IP,这个方式就是一些IDC提出的智能DNS的方案。
  
双IP双线路在一定程度上提高了网通与电信用户访问网站的速度,但缺点是由于服务器接入的是双网卡必须在服务器上进行路由表设置,这给普通用户增加了维护难度,并且所有的数据包都需要在服务器上进行路由判断然后再发往不同的网卡,当访问量较大时服务器资源占用很大。此方案是最简单的双线解决方案,一般限于规模较小的IDC提供商使用。

二、 单IP双线路
  
普通的单IP双线路是指在服务器上设置一个IP,此IP是网通IP或是电信IP,通过路由设备设置数据包是通过是电信网络或是网通网络发出来实现的双线技术。此方案也可以提高网通用户与电信用户的访问速度,解决了双IP双线需要在服务器上设置路由的问题,但由于IP地址采用的是网通或电信的IP,访问用户在发送请求数据包时不会自动判别最好的路由。所以这种解决方案只能说是半双线的技术方案、是一种过渡形式的解决方案。此方案一般为单线IDC服务商往双线IDC服务商转型期所采用的临时方案。

三、 CDN方式实现双线路
  
CDN (Content Delivery Network) 互联网内容分发网络,就是多服务器分网托管加智能域名DNS,即服务器是CDN服务商提供,放在不同网络节点上,通过缓冲程序自动抓取用户源服务器的数据,然后缓存在不同网段节点的服务器上。再配合智能DNS服务器的分网解析功能,实现不同网络用户都能访问到离自己最近网段上的网站,从而避免因为网络问题而影响网站访问速度的目的。现绝大部份CDN技术在处理静态网站上比较成熟,对交互性很强如全动态页面的网站还不是很成熟。目前CDN方案主要作为一种辅助的解决方案需要配合其它的双线方案才能达到最好的效果。
  
四、 用BGP协议实现的单IP双线路
  
BGP (边界网关协议) 协议主要用于互联网AS (自治系统) 之间的互联,BGP的最主要功能在于控制路由的传播和选择最好的路由。中国网通与中国电信都具有AS号 (自治系统号) ,全国各大网络运营商多数都是通过BGP协议与自身的AS号来互联的。使用此方案来实现双线路需要在CNNIC (中国互联网信息中心) 申请IDC自己的IP地址段和AS号,然后通过BGP协议将此段IP地址广播到网通、电信等其它的网络运营商,使用BGP协议互联后网通与电信的所有骨干路由设备将会判断到IDC机房IP段的最佳路由,以保证网通、电信用户的高速访问。

使用此方案具体以下优点:

1． 服务器只需要设置一个IP地址,最佳访问路由是由网络上的骨干路由器根据路由跳数与其它技术指标来确定的,不会对占用服务器的任何系统资源。服务器的上行路由与下行路由都能选择最优的路径,所以能真正实现高速的单IP双线访问。
  
2． 由于BGP协议本身具有冗余备份、消除环路的特点,所以当IDC服务商有多条BGP互联线路时可以实现路由的相互备份,在一条线路出现故障时路由会自动切换到其它线路。
  
3． 使用BGP协议还可以使网络具有很强的扩展性可以将IDC网络与其他运营商互联,轻松实现单IP多线路,做到所有互联运营商的用户访问都很快。这个是双IP双线无法比拟的。

虽然BGP方案是最好的解决方案但由于此方案需要IDC提供商的设备投入与带宽投入方面较大并且技术上较为复杂,所以目前国内采用此方案仅限于实力较强的专业IDC服务商。

以上各种双线实现的方式各有优缺点,双IP双线成本较低,但网络不够稳定并且占用大量的服务器资源,普通单IP双线路只是实现了部分双线路的效果所以访问速度不佳,CDN方式对静态网页效果很好但对交互性很强的网页效果不太理想,BGP单IP双线路解决了以上所有的问题是最

BGP是运行于 TCP 上的一种自治系统的路由网关协议,融合几大运营商线路,主要是解决南北互通的问题！

BGP线路是由两条或两条以上的线路组成的多线路带宽,每条线路都在运营商那里广播了,如电信、联通、移动组成的三线BGP,就是机房的线路分别在电信、联通、移动运营商那里都做了广播的,自动识别来自不同线路的访问用户,并快速响应；通常把多线统称BGP,但实际上真正的BGP区别于普通多线,BGP线路是只有一个IP线路连接到服务器上,而普通双线或多线,需要有两个或多个IP线路连接到服务器上。
